{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TextDrawer = void 0;\n\nconst tslib_1 = require(\"tslib\");\n\nconst Utils_1 = require(\"../Utils\");\n\nconst Enums_1 = require(\"../Enums\");\n\nclass TextDrawer {\n  init(container) {\n    var _a;\n\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\n      const options = container.options;\n\n      if (Utils_1.Utils.isInArray(Enums_1.ShapeType.char, options.particles.shape.type) || Utils_1.Utils.isInArray(Enums_1.ShapeType.character, options.particles.shape.type)) {\n        const shapeOptions = (_a = options.particles.shape.options[Enums_1.ShapeType.character]) !== null && _a !== void 0 ? _a : options.particles.shape.options[Enums_1.ShapeType.char];\n\n        if (shapeOptions instanceof Array) {\n          for (const character of shapeOptions) {\n            yield Utils_1.Utils.loadFont(character);\n          }\n        } else {\n          if (shapeOptions !== undefined) {\n            yield Utils_1.Utils.loadFont(shapeOptions);\n          }\n        }\n      }\n    });\n  }\n\n  draw(context, particle, radius) {\n    const character = particle.shapeData;\n\n    if (character === undefined) {\n      return;\n    }\n\n    const textData = character.value;\n\n    if (textData === undefined) {\n      return;\n    }\n\n    const textParticle = particle;\n\n    if (textParticle.text === undefined) {\n      textParticle.text = textData instanceof Array ? Utils_1.Utils.itemFromArray(textData, particle.randomIndexData) : textData;\n    }\n\n    const text = textParticle.text;\n    const style = character.style;\n    const weight = character.weight;\n    const size = Math.round(radius) * 2;\n    const font = character.font;\n    const fill = particle.fill;\n    const offsetX = text.length * radius / 2;\n    context.font = `${style} ${weight} ${size}px \"${font}\"`;\n    const pos = {\n      x: -offsetX,\n      y: radius / 2\n    };\n\n    if (fill) {\n      context.fillText(text, pos.x, pos.y);\n    } else {\n      context.strokeText(text, pos.x, pos.y);\n    }\n  }\n\n}\n\nexports.TextDrawer = TextDrawer;","map":null,"metadata":{},"sourceType":"script"}